<div class="single-account-view">
    <app-info-page-header [title]="account?.accountName || ''">
        <div class="top-data">
            <div class="top-data--left">
                <app-number-text
                    [value]="account?.balance"
                    text="Balance"
                    [valueType]="getEnum.valuTextType.currency"
                    [focusColor]="getEnum.color.green"
                ></app-number-text> 
            </div>
            <div class="top-data--right">
                <div class="right-content">
                    <h3>Account <span>#{{ account?.accountNumber }}</span></h3>
                    <h3>Created on <span>{{ account?.createdOn | date:'longDate' }}</span></h3>
                    <button
                        class="button-menu"
                        mat-flat-button
                        color="primary"
                        matTooltip="More Options"
                        [matMenuTriggerFor]="moreOptionsMenu">
                        <p>Options</p>
                        <mat-icon>more_vert</mat-icon>
                    </button>
                   
                </div>
            </div>
        </div>
    </app-info-page-header>
    <div class="single-account-view--info">
        <h3>{{account?.description || ''}}</h3>
    </div>
    <mat-divider class="account-tansaction-divider"></mat-divider>
    <div class="journal-entries">

        <app-secondary-top-nav title="Transactions"></app-secondary-top-nav>
        <div class="journal-table" *ngIf="journalEntries; else noTransactions">
            <app-table [tableData]="journalEntries" [displayedColumns]="displayedColumns">
                
                <ng-container matSort>
                    
                    <ng-container matColumnDef="actions" >
                        <th mat-header-cell *matHeaderCellDef> Actions </th>
                        <td mat-cell *matCellDef="let row"> 
                            <button
                                mat-stroked-button
                                color="primary"
                            >View</button>
                        </td>
                </ng-container>
                
                <ng-container matColumnDef="description">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Description </th>
                    <td mat-cell *matCellDef="let row"> {{row.description}} </td>
                </ng-container>
                
                <ng-container matColumnDef="amount">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Amount </th>
                    <td mat-cell *matCellDef="let row"> {{row.amount | currency}} </td>
                </ng-container>
                
                <ng-container matColumnDef="transactionType">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Transaction Type </th>
                    <td mat-cell *matCellDef="let row"> {{row.transactionType | titlecase }} </td>
                </ng-container>
                
                <ng-container matColumnDef="createdBy">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Created By </th>
                    <td mat-cell *matCellDef="let row"> {{ row.createdBy | titlecase }} </td>
                </ng-container>
                
                <ng-container matColumnDef="date" >
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Created On </th>
                    <td mat-cell *matCellDef="let row"> {{row.date | date:'longDate'}} </td>
                </ng-container>       
                
               
            </ng-container>
            
        </app-table>
    </div>
</div>
</div>

<mat-menu #moreOptionsMenu>
    <button
        mat-menu-item
        color="primary"
        (click)="openEditModal()"
    >
        Edit Account
    </button>
    <button 
        *ngIf="account?.balance === 0" 
        mat-menu-item
        (click)="toggleActivation()"
        >{{ account?.isActive ? 'Deactivate' : 'Activate' }}</button>
</mat-menu>

<ng-template #noTransactions>
    <app-empty-table-info
        headerText="transactions"
        buttonText="Create Transaction"
        [requiredActionRoles]="[1]"
        [action]="openCreateEntryModalFn"
    ></app-empty-table-info>
</ng-template>